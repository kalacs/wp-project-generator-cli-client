{"version":3,"sources":["../services/http-client.js","../services/wp-manager-client.js","../components/Table.js","../components/LoadingIndicator.js","../components/Fetcher.js","services/index copy.js"],"names":["getConfig","user","password","baseURL","logger","trace","info","error","makeClient","axiosInstance","axios","create","paramsSerializer","params","qs","stringify","Endpoint","authEndpoint","TWO_PARAM_METHODS","createAuthHeader","token","decorateEnpointParams","paramIndex","headers","paramsCopy","slice","options","splice","Object","assign","authToken","login","post","email","makeEndpointWithAuth","path","client","endpoint","authorizationHandler","get","target","propKey","origProperty","args","optionParamIndex","indexOf","response","apply","status","data","Proxy","createWPManagerClient","projectsEndpoint","createWordpressProject","getProjectServicesStatuses","name","projectServicesEndpoint","destroyProjectServices","delete","createProjectServices","installProjectServiceWordpress","projectPrefix","Table","length","keys","map","header","index","toUpperCase","row","values","cell","LoadingIndicator","isLoading","loadingMessage","propTypes","PropTypes","bool","isRequired","string","DisplayData","console","log","undefined","DisplayError","Fetcher","beforeLoadingMessage","DataDisplayer","ErrorDisplayer","fetchData","dataMapper","errorHandler","toString","setIsLoading","setData","setError","fetch","call","afterLoadingMessage","func","wpManagerClient","ServiceIndex","bind","names","ports","rawPorts","rawStatus","test","chalk","green","red","italic"],"mappings":"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","file":"index copy.js","sourceRoot":"../../commands","sourcesContent":["import axios from 'axios';\nimport { default as EndpointFactory } from 'axios-endpoints';\nimport qs from 'qs';\n\nexport const getConfig = () => ({\n    user: 'test',\n    password: 'test',\n    baseURL: 'http://127.0.0.1:3000',\n    logger: {\n\t\ttrace: () => {},\n\t\tinfo: () => {},\n\t\terror: () => {}\n\t}\n});\n\nexport default function makeClient({\n    user,\n    password,\n    baseURL,\n    logger\n}) {\n    const axiosInstance = axios.create({\n        baseURL,\n        paramsSerializer: function (params) {\n            return qs.stringify(params);\n        }\n    });\n    const Endpoint = EndpointFactory(axiosInstance);\n    const authEndpoint = new Endpoint('/auth/login');\n    const TWO_PARAM_METHODS = [\n        'post',\n        'put',\n        'patch'\n    ];\n    const createAuthHeader = (token) => ({ 'Authorization' : `Bearer ${token}`});\n    const decorateEnpointParams = (params, paramIndex, headers) => {\n        const paramsCopy = params.slice(0);\n        const [ options ] = paramsCopy.slice(paramIndex)\n\n        if (!options) paramsCopy.splice(paramIndex, 1, { headers: headers })\n        else paramsCopy.splice(paramIndex, 1, Object.assign({}, options, { headers: headers }))\n        return paramsCopy;\n    }\n    logger.trace({ axiosInstance },'axios client');    \n\n    return {\n        authToken: null,\n        async login() {\n            return await authEndpoint.post({\n                email: user,\n                password\n            })\n        },\n        makeEndpointWithAuth(path) {\n            logger.trace({ path },'makeEndpointWithAuth');    \n            const client = this;\n            const endpoint = new Endpoint(path);\n            const authorizationHandler = {\n                get(target, propKey) {\n                    const origProperty = target[propKey];\n                    logger.trace({ origProperty },'Trap function call in endpoint');    \n\n                    if (typeof origProperty !== 'function') {\n                        return origProperty;\n                    }\n\n                    return async function (...args) {\n                        const optionParamIndex = (TWO_PARAM_METHODS.indexOf(origProperty) > -1 ) ? 1 : 0;\n                        const params = decorateEnpointParams(args, optionParamIndex, createAuthHeader(client.authToken));\n                        logger.trace({ optionParamIndex, params },'Call params');    \n\n                        try {\n                            const response = await origProperty.apply(this, params);\n                            const { status } = response;\n                            logger.info({ status }, 'Http client response status');    \n\n                            return response;\n                        } catch (error) {\n                            logger.error({ error }, 'Http client error');\n\n                            if (!error.response || error.response.status !== 401) {\n                                throw error;\n                            }\n                            const { status } = error.response;\n\n                            try {\n                                logger.trace({ status }, 'Try to sign in');\n                                const { data: { token } } = await client.login();\n                                client.authToken = token;\n                                logger.trace({ token }, 'Token');                                        \n\n                                logger.trace('Run request after login');\n                                const response = await origProperty.apply(this, decorateEnpointParams(params, optionParamIndex, createAuthHeader(client.authToken)));\n                                logger.info({ status }, 'Http client secodresponse status');    \n    \n                                return response;\n\n                            } catch (error) {\n                                logger.error({ error }, 'Login error');                                        \n                                throw error;\n                            }\n                        }\n                    };\n                }\n            };\n            return new Proxy(endpoint, authorizationHandler);\n        }\n    };\n}","import makeClient from '../services/http-client';\n\nexport default function createWPManagerClient({\n    user,\n    password,\n    baseURL,\n    logger\n  }) {\n    const client = makeClient({\n        user,\n        password,\n        baseURL,\n        logger\n      })  \n      const projectsEndpoint = client.makeEndpointWithAuth('/wordpress-project');\n\n    return {\n        createWordpressProject: params => projectsEndpoint.post(params),\n        getProjectServicesStatuses: name => {\n          const projectServicesEndpoint = client.makeEndpointWithAuth(`/wordpress-project/${name}/services`);\n          return projectServicesEndpoint.get();\n        },\n        destroyProjectServices: name => (client.makeEndpointWithAuth(`/wordpress-project/${name}/services`)).delete(),\n        createProjectServices: name => (client.makeEndpointWithAuth(`/wordpress-project/${name}/services`)).post({}),\n        installProjectServiceWordpress: params => (client.makeEndpointWithAuth(`/wordpress-project/${params.projectPrefix}/services/wordpress`)).post(params),\n    }\n}","import React, { Fragment } from 'react';\nimport { Box, Color, Text } from 'ink';\n\nconst Table = ({ data }) => {\n    return (\n        <Box>\n        {data && data.length > 0 ?\n            <Box flexDirection=\"column\">\n                <Box flexDirection=\"row\">\n                    {\n                        Object.keys(data[0]).map((header, index) => (\n                                <Box key={`header-${index}`} marginRight={2} flexGrow={1}>            \n                                    <Color blue>\n                                        <Text>{header.toUpperCase()}</Text>\n                                    </Color>\n                                </Box>\n                            )\n                        )\n                    }\n                </Box>\n                <Box flexDirection=\"column\">\n                    {data.map((row, index) => {\n                        return (\n                            <Box key={`row-${index}`} flexDirection=\"row\"  flexGrow={1}>{\n                                    Object.values(row).map((cell, index) => {\n                                        return (\n                                            <Box key={`cell-${index}`} marginRight={2} justifyContent=\"flex-start\">            \n                                                <Text>{cell}</Text>\n                                            </Box>\n                                        );\n                                    }\n                                )\n                            }</Box>\n                        );\n                    })}\n                </Box>\n            </Box>\n            : \n            <Color white>\n                <Text>No data</Text>\n            </Color>\n        }\n            </Box>\n    );\n}\n\nexport default Table;","import React, { Fragment } from 'react';\nimport { Box, Text, Color } from 'ink';\nimport Spinner from 'ink-spinner';\nimport PropTypes from 'prop-types';\n\nconst LoadingIndicator = ({ isLoading, loadingMessage = 'Fetching data from server'}) => (\n    <Fragment>\n        {\n            isLoading\n            ?\n            <Box>\n                <Text bold>{loadingMessage}</Text>\n                <Color green><Spinner type=\"point\" /></Color>\n            </Box>\n            :\n            <Box>\n                <Text> </Text>\n            </Box>\n        }\n    </Fragment>\n)\n\nLoadingIndicator.propTypes = {\n    isLoading: PropTypes.bool.isRequired,\n    loadingMessage: PropTypes.string.isRequired,\n}\n\nexport default LoadingIndicator;","import React, { Fragment, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Text, Box, Color } from 'ink';\nimport LoadingIndicator from './LoadingIndicator';\n\nconst DisplayData = ({ data }) => {\n    console.log('DATA', data);\n\n    return (\n        <Fragment>\n            { data === undefined ? <Text>No data yet</Text> : <Text>{data}</Text>}        \n        </Fragment>\n    )\n};\n\nconst DisplayError = ({ error }) => (\n    <Fragment>\n        { error ? <Color red><Text>{error}</Text></Color> : <Text> </Text>}        \n    </Fragment>\n);\n\nconst Fetcher = ({\n    beforeLoadingMessage,\n    DataDisplayer = DisplayData,\n    ErrorDisplayer = DisplayError,\n    fetchData,\n    dataMapper = data => data,\n    errorHandler = error => error.toString(),\n}) => {\n\n\tconst [ isLoading, setIsLoading ] = useState(false);\n\tconst [ data, setData ] = useState(undefined);\n    const [ error, setError ] = useState('');\n\n\tuseEffect(() => {\n\t\tasync function fetch() {\n\t\t\ttry {\n\t\t\t\tsetIsLoading(true);\n\t\t\t\tconst response = await fetchData.call();\n\t\t\t\tsetIsLoading(false);\n\t\t\t\tsetData(dataMapper(response));\n\t\t\t} catch (error) {\n\t\t\t\tsetIsLoading(false);\n\t\t\t\tsetError(errorHandler(error));\n\t\t\t}\n\t\t}\n\t\tfetch();\n\t}, [fetchData]);\n\n\treturn (\n        <Fragment>\n            <Box>\n\t\t\t<LoadingIndicator\n                isLoading={isLoading}\n                loadingMessage={beforeLoadingMessage}\n            />\n            </Box>\n            <Box>\n                <DataDisplayer data={data}/>\n            </Box>\n            <Box>\n                <ErrorDisplayer error={error}/>\n            </Box>\n        </Fragment>\n    );\n};\n\nFetcher.propTypes = {\n    afterLoadingMessage: PropTypes.string,\n    beforeLoadingMessage: PropTypes.string,\n    fetchData: PropTypes.func.isRequired,\n    dataMapper: PropTypes.func,\n    errorHandler: PropTypes.func\n};\n\nexport default Fetcher;","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Box } from 'ink';\nimport { getConfig } from '../../services/http-client';\nimport createWPManagerClient from '../../services/wp-manager-client';\nimport Table from '../../components/Table';\nimport chalk from 'chalk';\nimport Fetcher from '../../components/Fetcher';\n\nconst wpManagerClient = createWPManagerClient(getConfig());\n\n/// Get services statuses\nconst ServiceIndex = ({ name }) => (\n\t<Box flexDirection=\"column\" width=\"5000\">\n\t\t<Fetcher\n\t\t\tfetchData={wpManagerClient.getProjectServicesStatuses.bind(null, name)}\n\t\t\tbeforeLoadingMessage={`Get ${name} project's statuses...`}\n\t\t\tdataMapper={({ data }) => data.map(({ names, ports: rawPorts, status: rawStatus }) => {\n\t\t\t\tconst status = /Up/.test(rawStatus) ? chalk.green('●') : chalk.red('●');\n\t\t\t\tconst ports = rawPorts || chalk.italic('None');\n\t\t\t\treturn {\n\t\t\t\t\tnames,\n\t\t\t\t\tports,\n\t\t\t\t\tstatus\n\t\t\t\t};\n\t\t\t})}\n\t\t\tDataDisplayer={Table}\n\t\t/>\n\t</Box>\n);\n\nServiceIndex.propTypes = {\n\t/// Name of the project\n\tname: PropTypes.string.isRequired\n};\n\nexport default ServiceIndex;\n"]}