{"version":3,"sources":["../services/http-client.js","../services/wp-manager-client.js","../components/TextInput.js","../components/SelectInput.js","../components/MultiSelectInput.js","../utils/factories/field-creators.js","../components/Error.js","../components/FormField.js","../utils/hooks/fetch.js","services-wordpress-plugins/index.js"],"names":["getConfig","user","password","baseURL","logger","trace","info","error","makeClient","axiosInstance","axios","create","paramsSerializer","params","qs","stringify","Endpoint","authEndpoint","TWO_PARAM_METHODS","createAuthHeader","token","decorateEnpointParams","paramIndex","headers","paramsCopy","slice","options","splice","Object","assign","authToken","login","post","email","makeEndpointWithAuth","path","client","endpoint","authorizationHandler","get","target","propKey","origProperty","args","optionParamIndex","indexOf","response","apply","status","data","Proxy","createWPManagerClient","projectsEndpoint","createWordpressProject","getProjectServicesStatuses","name","projectServicesEndpoint","destroyProjectServices","delete","startProjectServices","command","stopProjectServices","createProjectServices","installProjectServiceWordpress","projectPrefix","installWordpressPlugins","getWordpressPackages","getWordpressPackagesContent","packageName","TextInput","onBlur","onFocus","props","React","useEffect","SelectInput","onSubmit","onChange","value","MultiSelectInput","v","concat","filter","item","createTextInput","label","placeholder","format","validate","undefined","Input","createSelectInput","inputConfig","createMultiSelectInput","Error","children","FormField","isActive","input","meta","invalid","touched","valid","inactive","fetchHook","onSuccess","onLoad","onFailed","fetchData","fetch","call","wpManagerClient","isRequired","noFormatNoPlaceholderRequired","getPackage","transformForPackage","items","keys","map","toUpperCase","transformForContent","contentType","Install","initialValues","onData","activeField","setActiveField","useState","submission","setSubmission","packageData","setPackageData","packages","setPackages","plugins","setPlugins","themes","setThemes","console","log","fields","setFieldData","handleSubmit","validating","form","packageState","getFieldState","selectedPackage","mutators","index","length","JSON"],"mappings":"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","file":"index.js","sourceRoot":"../../commands","sourcesContent":["import axios from 'axios';\nimport { default as EndpointFactory } from 'axios-endpoints';\nimport qs from 'qs';\n\nexport const getConfig = () => ({\n    user: 'test',\n    password: 'test',\n    baseURL: 'http://127.0.0.1:3000',\n    logger: {\n\t\ttrace: () => {},\n\t\tinfo: () => {},\n\t\terror: () => {}\n\t}\n});\n\nexport default function makeClient({\n    user,\n    password,\n    baseURL,\n    logger\n}) {\n    const axiosInstance = axios.create({\n        baseURL,\n        paramsSerializer: function (params) {\n            return qs.stringify(params);\n        }\n    });\n    const Endpoint = EndpointFactory(axiosInstance);\n    const authEndpoint = new Endpoint('/auth/login');\n    const TWO_PARAM_METHODS = [\n        'post',\n        'put',\n        'patch'\n    ];\n    const createAuthHeader = (token) => ({ 'Authorization' : `Bearer ${token}`});\n    const decorateEnpointParams = (params, paramIndex, headers) => {\n        const paramsCopy = params.slice(0);\n        const [ options ] = paramsCopy.slice(paramIndex)\n\n        if (!options) paramsCopy.splice(paramIndex, 1, { headers: headers })\n        else paramsCopy.splice(paramIndex, 1, Object.assign({}, options, { headers: headers }))\n        return paramsCopy;\n    }\n    logger.trace({ axiosInstance },'axios client');    \n\n    return {\n        authToken: null,\n        async login() {\n            return await authEndpoint.post({\n                email: user,\n                password\n            })\n        },\n        makeEndpointWithAuth(path) {\n            logger.trace({ path },'makeEndpointWithAuth');    \n            const client = this;\n            const endpoint = new Endpoint(path);\n            const authorizationHandler = {\n                get(target, propKey) {\n                    const origProperty = target[propKey];\n                    logger.trace({ origProperty },'Trap function call in endpoint');    \n\n                    if (typeof origProperty !== 'function') {\n                        return origProperty;\n                    }\n\n                    return async function (...args) {\n                        const optionParamIndex = (TWO_PARAM_METHODS.indexOf(origProperty) > -1 ) ? 1 : 0;\n                        const params = decorateEnpointParams(args, optionParamIndex, createAuthHeader(client.authToken));\n                        logger.trace({ optionParamIndex, params },'Call params');    \n\n                        try {\n                            const response = await origProperty.apply(this, params);\n                            const { status } = response;\n                            logger.info({ status }, 'Http client response status');    \n\n                            return response;\n                        } catch (error) {\n                            logger.error({ error }, 'Http client error');\n\n                            if (!error.response || error.response.status !== 401) {\n                                throw error;\n                            }\n                            const { status } = error.response;\n\n                            try {\n                                logger.trace({ status }, 'Try to sign in');\n                                const { data: { token } } = await client.login();\n                                client.authToken = token;\n                                logger.trace({ token }, 'Token');                                        \n\n                                logger.trace('Run request after login');\n                                const response = await origProperty.apply(this, decorateEnpointParams(params, optionParamIndex, createAuthHeader(client.authToken)));\n                                logger.info({ status }, 'Http client secodresponse status');    \n    \n                                return response;\n\n                            } catch (error) {\n                                logger.error({ error }, 'Login error');                                        \n                                throw error;\n                            }\n                        }\n                    };\n                }\n            };\n            return new Proxy(endpoint, authorizationHandler);\n        }\n    };\n}","import makeClient from '../services/http-client';\n\nexport default function createWPManagerClient({\n    user,\n    password,\n    baseURL,\n    logger\n  }) {\n    const client = makeClient({\n        user,\n        password,\n        baseURL,\n        logger\n      })  \n      const projectsEndpoint = client.makeEndpointWithAuth('/wordpress-project');\n\n    return {\n        createWordpressProject: params => projectsEndpoint.post(params),\n        getProjectServicesStatuses: name => {\n          const projectServicesEndpoint = client.makeEndpointWithAuth(`/wordpress-project/${name}/services`);\n          return projectServicesEndpoint.get();\n        },\n        destroyProjectServices: name => (client.makeEndpointWithAuth(`/wordpress-project/${name}/services`)).delete(),\n        startProjectServices: name => (client.makeEndpointWithAuth(`/wordpress-project/${name}/services`)).post({ command: 'restart' }),\n        stopProjectServices: name => (client.makeEndpointWithAuth(`/wordpress-project/${name}/services`)).post({ command: 'stop' }),\n        createProjectServices: name => (client.makeEndpointWithAuth(`/wordpress-project/${name}/services`)).post({ command: 'up' }),\n        installProjectServiceWordpress: params => (client.makeEndpointWithAuth(`/wordpress-project/${params.projectPrefix}/services/wordpress`)).post(params),\n        installWordpressPlugins: params => (client.makeEndpointWithAuth(`/wordpress-project/${params.projectPrefix}/services/wordpress/plugins`)).post(params),\n\n        getWordpressPackages: () => (client.makeEndpointWithAuth(`/wordpress-project/packages`)).get(),\n        getWordpressPackagesContent: packageName => (client.makeEndpointWithAuth(`/wordpress-project/packages/${packageName}`)).get(),\n      }\n}","import React from 'react'\nimport InkTextInput from 'ink-text-input'\n\nexport default function TextInput({ onBlur, onFocus, ...props }) {\n\tReact.useEffect(() => {\n\t\tonFocus()\n\t\treturn onBlur\n\t}, [onFocus, onBlur])\n\treturn <InkTextInput {...props} />\n}","import React from 'react'\nimport InkSelectInput from 'ink-select-input'\n\nexport default function SelectInput({\n\tonSubmit,\n\tonBlur,\n\tonChange,\n\tonFocus,\n\t...props\n}) {\n\tReact.useEffect(() => {\n\t\tonFocus()\n\t\treturn onBlur\n\t}, [onFocus, onBlur])\n\treturn (\n\t\t<InkSelectInput\n\t\t\t{...props}\n\t\t\tonSelect={({ value }) => {\n\t\t\t\tonChange(value)\n\t\t\t\tonSubmit()\n\t\t\t}}\n\t\t/>\n\t)\n}","import React from 'react'\nimport InkMultiSelect from 'ink-multi-select'\n\nexport default function MultiSelectInput({\n\tonBlur,\n\tonChange,\n\tonFocus,\n\tvalue = [],\n\t...props\n}) {\n\tReact.useEffect(() => {\n\t\tonFocus()\n\t\treturn onBlur\n\t}, [onFocus, onBlur])\n\treturn (\n\t\t<InkMultiSelect\n\t\t\t{...props}\n\t\t\tonSelect={({ value: v }) => onChange(value.concat(v))}\n\t\t\tonUnselect={({ value: v }) => onChange(value.filter(item => item !== v))}\n\t\t/>\n\t)\n}","import TextInput from '../../components/TextInput'\nimport SelectInput from '../../components/SelectInput'\nimport MultiSelectInput from '../../components/MultiSelectInput'\n\nexport const createTextInput = (name, label, placeholder = '', format = value => value || '', validate = () => undefined) => ({\n\tname,\n\tlabel,\n\tplaceholder,\n\tformat,\n\tvalidate,\n\tInput: TextInput\n})\n\nexport const createSelectInput = (name, label, inputConfig, format = value => value || '', validate = () => undefined) => ({\n\tname,\n\tlabel,\n\tinputConfig,\n\tformat,\n\tvalidate,\n\tInput: SelectInput\n})\n\nexport const createMultiSelectInput = (name, label, inputConfig, format = value => value, validate = undefined) => ({\n\tname,\n\tlabel,\n\tinputConfig,\n\tformat,\n\tvalidate,\n\tInput: MultiSelectInput\n})","import React from 'react'\nimport { Box, Color } from 'ink'\n\nexport default function Error({ children }) {\n\treturn (\n\t\t<Box>\n\t\t\t<Color red>{children}</Color>\n\t\t</Box>\n\t)\n}","import React from 'react';\nimport { Field } from 'react-final-form'\nimport { Box, Color, Text } from 'ink'\nimport Error from '../components/Error'\n\nconst FormField = (\n    {\n        name,\n        label,\n        placeholder,\n        format,\n        validate,\n        Input,\n        inputConfig,\n        onSubmit,\n        isActive\n    }\n) => (\n    <Field name={name} key={name} format={format} validate={validate}>\n        {({ input, meta }) => {\n            return (\n                <Box flexDirection=\"column\">\n                    <Box>\n                        <Text bold={isActive}>{label}: </Text>\n                        {isActive ? (\n                            <Input\n                                {...input}\n                                {...inputConfig}\n                                {...meta.data.inputConfig}\n                                placeholder={placeholder}\n                                onSubmit={() => {\n                                    onSubmit({ input, meta })\n                                }}\n                            />\n                        ) : (\n                            (input.value && <Text>{input.value}</Text>) ||\n                            (placeholder && <Color gray>{placeholder}</Color>)\n                        )}\n                        {meta.invalid && meta.touched && (\n                            <Box marginLeft={2}>\n                                <Color red>✖</Color>\n                            </Box>\n                        )}\n                        {meta.valid && meta.touched && meta.inactive && (\n                            <Box marginLeft={2}>\n                                <Color green>✔</Color>\n                            </Box>\n                        )}\n                    </Box>\n                    {meta.error && meta.touched && <Error>{meta.error}</Error>}\n                </Box>\n            )\n        }}\n    </Field>\n)\n\nexport default FormField;","import { memo } from \"react\";\n\nconst fetchHook = ({\n    onSuccess,\n    onLoad,\n    onFailed,\n    fetchData,\n}) => {\n    return () => {\n        async function fetch() {\n            try {\n                onLoad(true);\n                const response = await fetchData.call();\n                onSuccess(response);\n                onLoad(false);\n            } catch (error) {\n                onLoad(false);\n                onSuccess(null);\n                onFailed(error)\n            }\n        }\n        fetch();\n    };\n}\n\nexport default fetchHook;\n\n\n","import React, { memo, useEffect, Fragment } from 'react'\nimport { Form, FormSpy } from 'react-final-form'\nimport { Box } from 'ink'\nimport createWPManagerClient from '../../services/wp-manager-client';\nimport { createTextInput, createSelectInput, createMultiSelectInput } from '../../utils/factories/field-creators';\nimport FormField from '../../components/FormField';\nimport fetchHook from '../../utils/hooks/fetch';\nimport setFieldData from 'final-form-set-field-data';\n\nconst wpManagerClient = createWPManagerClient({\n    user: 'test',\n    password: 'test',\n    baseURL: 'http://127.0.0.1:3000',\n    logger: {\n\t\ttrace: () => {},\n\t\tinfo: () => {},\n\t\terror: () => {}\n\t}\n});\nconst isRequired = value => !value ? 'Required' : undefined; \nconst noFormatNoPlaceholderRequired = (name, label) => [name, label, '', undefined, isRequired];\n\nconst getPackage = name => data => data[name];\nconst transformForPackage = data => ({ items: Object.keys(data).map(item => ({ label: item.toUpperCase(), value: item })) });\nconst transformForContent = contentType => data => contentType in data && data[contentType] ? data[contentType].map(item => ({ label: item.name, value: item.path })) : []\n\n/// Install generated and started wordpress\nconst Install = ({ initialValues, onData }) => {\n\tconst [activeField, setActiveField] = React.useState(0)\n\tconst [submission, setSubmission] = React.useState()\n\tconst [packageData, setPackageData] = React.useState({ })\n    const [packages, setPackages] = React.useState({ items: []})\n    const [plugins, setPlugins] = React.useState({ items: []})\n    const [themes, setThemes ] = React.useState({ items: []})\n\n    useEffect(fetchHook({\n        onSuccess: (response) => {\n            if (response) {\n                setPackageData(response.data);\n                setPackages(transformForPackage(response.data));\n            }            \n        },\n        onFailed: error => console.log('ERROR', error),\n        fetchData: wpManagerClient.getWordpressPackages,\n        onLoad: () => {}\n    }), []);\n    const fields = [\n        createSelectInput('package','Package', packages),\n        createMultiSelectInput('plugins', 'Plugins'),\n        createSelectInput('theme','Theme', themes),\n    ];\n    return (\n        <Fragment>\n        {\n            !submission ?\n            <Form\n                onSubmit={setSubmission}\n                initialValues={initialValues}\n                mutators={{ setFieldData }}\n            >\n                {({ handleSubmit, validating, form }) => {\n                    const packageState = form.getFieldState('package');\n                    const selectedPackage = packageState && 'value' in packageState ? packageState.value : '';\n\n                    if(selectedPackage) {\n                        form.mutators.setFieldData('plugins', { inputConfig: { items: transformForContent('plugins')(getPackage(selectedPackage)(packageData))}});\n                        form.mutators.setFieldData('theme', { inputConfig: { items: transformForContent('themes')(getPackage(selectedPackage)(packageData))}});\n                    }\n\n                    return (\n                        <Box flexDirection=\"column\">\n                            {fields.map((\n                                {\n                                    name,\n                                    label,\n                                    placeholder,\n                                    format,\n                                    validate,\n                                    Input,\n                                    inputConfig,\n                                },\n                                index\n                            ) => (<FormField key={name} {...{\n                                name,\n                                label,\n                                placeholder,\n                                format,\n                                validate,\n                                Input,\n                                inputConfig,\n                                isActive: activeField === index,\n                                onSubmit: ({ meta, input }) => {\n                                    if (meta.valid && !validating) {\n                                        setActiveField(value => value + 1) // go to next field\n                                        if (activeField === fields.length - 1) {\n                                            // last field, so submit\n                                            handleSubmit()\n                                        }\n                                    } else {\n                                        input.onBlur() // mark as touched to show error\n                                    }\n                                }\n                            }} />))}\n                        </Box>\n                    );\n                }}\n            </Form> : \n            JSON.stringify(submission)\n        }\n\n    </Fragment>\n\n\t)\n}\nexport default memo(Install);"]}