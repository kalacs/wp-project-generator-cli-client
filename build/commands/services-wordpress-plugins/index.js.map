{"version":3,"sources":["../services/http-client.js","../services/wp-manager-client.js","../components/SelectInput.js","../utils/hooks/fetch.js","../components/DynamicSelect.js","../components/PackageSelector.js","services-wordpress-plugins/index.js"],"names":["getConfig","user","password","baseURL","logger","trace","info","error","makeClient","axiosInstance","axios","create","paramsSerializer","params","qs","stringify","Endpoint","authEndpoint","TWO_PARAM_METHODS","createAuthHeader","token","decorateEnpointParams","paramIndex","headers","paramsCopy","slice","options","splice","Object","assign","authToken","login","post","email","makeEndpointWithAuth","path","client","endpoint","authorizationHandler","get","target","propKey","origProperty","args","optionParamIndex","indexOf","response","apply","status","data","Proxy","createWPManagerClient","projectsEndpoint","createWordpressProject","getProjectServicesStatuses","name","projectServicesEndpoint","destroyProjectServices","delete","startProjectServices","command","stopProjectServices","createProjectServices","installProjectServiceWordpress","projectPrefix","installWordpressPlugins","getWordpressPackages","SelectInput","onSubmit","onBlur","onChange","onFocus","props","React","useEffect","value","fetchHook","onSuccess","onLoad","onFailed","fetchData","fetch","call","DynamicSelect","label","selectProps","hookProps","toItems","items","setItems","console","log","wpManagerClient","PackageSelector","onSelect","bind","keys","map","item","toUpperCase","Index","packageName","setPackageName","exit"],"mappings":"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","file":"index.js","sourceRoot":"../../commands","sourcesContent":["import axios from 'axios';\nimport { default as EndpointFactory } from 'axios-endpoints';\nimport qs from 'qs';\n\nexport const getConfig = () => ({\n    user: 'test',\n    password: 'test',\n    baseURL: 'http://127.0.0.1:3000',\n    logger: {\n\t\ttrace: () => {},\n\t\tinfo: () => {},\n\t\terror: () => {}\n\t}\n});\n\nexport default function makeClient({\n    user,\n    password,\n    baseURL,\n    logger\n}) {\n    const axiosInstance = axios.create({\n        baseURL,\n        paramsSerializer: function (params) {\n            return qs.stringify(params);\n        }\n    });\n    const Endpoint = EndpointFactory(axiosInstance);\n    const authEndpoint = new Endpoint('/auth/login');\n    const TWO_PARAM_METHODS = [\n        'post',\n        'put',\n        'patch'\n    ];\n    const createAuthHeader = (token) => ({ 'Authorization' : `Bearer ${token}`});\n    const decorateEnpointParams = (params, paramIndex, headers) => {\n        const paramsCopy = params.slice(0);\n        const [ options ] = paramsCopy.slice(paramIndex)\n\n        if (!options) paramsCopy.splice(paramIndex, 1, { headers: headers })\n        else paramsCopy.splice(paramIndex, 1, Object.assign({}, options, { headers: headers }))\n        return paramsCopy;\n    }\n    logger.trace({ axiosInstance },'axios client');    \n\n    return {\n        authToken: null,\n        async login() {\n            return await authEndpoint.post({\n                email: user,\n                password\n            })\n        },\n        makeEndpointWithAuth(path) {\n            logger.trace({ path },'makeEndpointWithAuth');    \n            const client = this;\n            const endpoint = new Endpoint(path);\n            const authorizationHandler = {\n                get(target, propKey) {\n                    const origProperty = target[propKey];\n                    logger.trace({ origProperty },'Trap function call in endpoint');    \n\n                    if (typeof origProperty !== 'function') {\n                        return origProperty;\n                    }\n\n                    return async function (...args) {\n                        const optionParamIndex = (TWO_PARAM_METHODS.indexOf(origProperty) > -1 ) ? 1 : 0;\n                        const params = decorateEnpointParams(args, optionParamIndex, createAuthHeader(client.authToken));\n                        logger.trace({ optionParamIndex, params },'Call params');    \n\n                        try {\n                            const response = await origProperty.apply(this, params);\n                            const { status } = response;\n                            logger.info({ status }, 'Http client response status');    \n\n                            return response;\n                        } catch (error) {\n                            logger.error({ error }, 'Http client error');\n\n                            if (!error.response || error.response.status !== 401) {\n                                throw error;\n                            }\n                            const { status } = error.response;\n\n                            try {\n                                logger.trace({ status }, 'Try to sign in');\n                                const { data: { token } } = await client.login();\n                                client.authToken = token;\n                                logger.trace({ token }, 'Token');                                        \n\n                                logger.trace('Run request after login');\n                                const response = await origProperty.apply(this, decorateEnpointParams(params, optionParamIndex, createAuthHeader(client.authToken)));\n                                logger.info({ status }, 'Http client secodresponse status');    \n    \n                                return response;\n\n                            } catch (error) {\n                                logger.error({ error }, 'Login error');                                        \n                                throw error;\n                            }\n                        }\n                    };\n                }\n            };\n            return new Proxy(endpoint, authorizationHandler);\n        }\n    };\n}","import makeClient from '../services/http-client';\n\nexport default function createWPManagerClient({\n    user,\n    password,\n    baseURL,\n    logger\n  }) {\n    const client = makeClient({\n        user,\n        password,\n        baseURL,\n        logger\n      })  \n      const projectsEndpoint = client.makeEndpointWithAuth('/wordpress-project');\n\n    return {\n        createWordpressProject: params => projectsEndpoint.post(params),\n        getProjectServicesStatuses: name => {\n          const projectServicesEndpoint = client.makeEndpointWithAuth(`/wordpress-project/${name}/services`);\n          return projectServicesEndpoint.get();\n        },\n        destroyProjectServices: name => (client.makeEndpointWithAuth(`/wordpress-project/${name}/services`)).delete(),\n        startProjectServices: name => (client.makeEndpointWithAuth(`/wordpress-project/${name}/services`)).post({ command: 'restart' }),\n        stopProjectServices: name => (client.makeEndpointWithAuth(`/wordpress-project/${name}/services`)).post({ command: 'stop' }),\n        createProjectServices: name => (client.makeEndpointWithAuth(`/wordpress-project/${name}/services`)).post({ command: 'up' }),\n        installProjectServiceWordpress: params => (client.makeEndpointWithAuth(`/wordpress-project/${params.projectPrefix}/services/wordpress`)).post(params),\n        installWordpressPlugins: params => (client.makeEndpointWithAuth(`/wordpress-project/${params.projectPrefix}/services/wordpress/plugins`)).post(params),\n        getWordpressPackages: name => (client.makeEndpointWithAuth(`/wordpress-project/${name}/services/wordpress/packages`)).get(),\n      }\n}","import React from 'react'\nimport InkSelectInput from 'ink-select-input'\n\nexport default function SelectInput({\n\tonSubmit,\n\tonBlur,\n\tonChange,\n\tonFocus,\n\t...props\n}) {\n\tReact.useEffect(() => {\n\t\tonFocus()\n\t\treturn onBlur\n\t}, [onFocus, onBlur])\n\treturn (\n\t\t<InkSelectInput\n\t\t\t{...props}\n\t\t\tonSelect={({ value }) => {\n\t\t\t\tonChange(value)\n\t\t\t\tonSubmit()\n\t\t\t}}\n\t\t/>\n\t)\n}","import { memo } from \"react\";\n\nconst fetchHook = ({\n    onSuccess,\n    onLoad,\n    onFailed,\n    fetchData,\n}) => {\n    return () => {\n        async function fetch() {\n            try {\n                onLoad(true);\n                const response = await fetchData.call();\n                onSuccess(response);\n                onLoad(false);\n            } catch (error) {\n                onLoad(false);\n                onSuccess(null);\n                onFailed(error)\n            }\n        }\n        fetch();\n    };\n}\n\nexport default fetchHook;\n\n\n","import React, { Fragment, useEffect, useState, memo } from 'react';\nimport { Text, Color, Box } from 'ink';\nimport SelectInput from './SelectInput';\nimport fetchHook from '../utils/hooks/fetch';\n\nconst DynamicSelect = ({\n    label,\n    selectProps,\n    hookProps,\n    toItems = () => []\n}) => {\n    const {\n        onSuccess = () => {},\n        onLoad = () => {},\n        onFailed = () => {},\n        fetchData = () => {},\n    } = hookProps;\n    const [items, setItems] = useState([]);\n\n    useEffect(fetchHook({\n        onSuccess: ({ data }) => setItems(toItems(data)),\n        onLoad,\n        onFailed: error => console.log('ERROR', error),\n        fetchData\n    }), []);\n\n    return (\n        <Fragment>\n            <Text bold>{label}</Text>\n            <SelectInput {...selectProps} items={items} />\n        </Fragment>\n    );\n};\n\nexport default memo(DynamicSelect);","import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\nimport DynamicSelect from './DynamicSelect';\nimport createWPManagerClient from '../services/wp-manager-client';\n\nconst wpManagerClient = createWPManagerClient({\n    user: 'test',\n    password: 'test',\n    baseURL: 'http://127.0.0.1:3000',\n    logger: {\n\t\ttrace: () => {},\n\t\tinfo: () => {},\n\t\terror: () => {}\n\t}\n})\n\n/// Wordpress commands\nconst PackageSelector = ({ onSelect, onSubmit }) => {\n    return (\n            <DynamicSelect \n                label='Select from predefined package'\n                selectProps={{\n                    onSubmit,\n                    onFocus: onSelect,\n                    onChange: onSelect,\n                    name: 'package'\n                }}\n                hookProps={{\n                    fetchData: wpManagerClient.getWordpressPackages.bind(null, 'bela')\n                }}\n                toItems={data => {\n                    return Object.keys(data).map(item => ({ label: item.toUpperCase(), value: item }));\n                }}\n            />\n    );\n};\n\nexport default memo(PackageSelector);\n","import React, { Fragment, memo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {Text, useApp} from 'ink';\nimport createWPManagerClient from '../../services/wp-manager-client';\nimport PackageSelector from '../../components/PackageSelector';\n\nconst wpManagerClient = createWPManagerClient({\n    user: 'test',\n    password: 'test',\n    baseURL: 'http://127.0.0.1:3000',\n    logger: {\n\t\ttrace: () => {},\n\t\tinfo: () => {},\n\t\terror: () => {}\n\t}\n})\n\n/// Wordpress commands\nconst Index = () => {\n    const [packageName, setPackageName] = useState();\n    const { exit } = useApp();\n\n    return (\n        <Fragment>\n            <PackageSelector\n                onSelect={setPackageName}\n                onSubmit={exit}\n            />\n        </Fragment>\n    );\n};\n\nexport default memo(Index);\n"]}