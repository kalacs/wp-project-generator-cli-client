{"version":3,"sources":["../components/TextInput.js","../components/SelectInput.js","../components/MultiSelectInput.js","../components/Error.js","../services/http-client.js","../services/wp-manager-client.js","project/create.js"],"names":["TextInput","onBlur","onFocus","props","React","useEffect","SelectInput","onSubmit","onChange","value","MultiSelectInput","v","concat","filter","item","Error","children","makeClient","user","password","baseURL","logger","axiosInstance","axios","create","paramsSerializer","params","qs","stringify","Endpoint","authEndpoint","TWO_PARAM_METHODS","createAuthHeader","token","decorateEnpointParams","paramIndex","headers","paramsCopy","slice","options","splice","Object","assign","trace","authToken","login","post","email","makeEndpointWithAuth","path","client","endpoint","authorizationHandler","get","target","propKey","origProperty","args","optionParamIndex","indexOf","response","apply","status","info","error","data","Proxy","createWPManagerClient","projectsEndpoint","createWordpressProject","wpManagerClient","console","log","createTextInput","name","label","placeholder","format","validate","undefined","Input","createSelectInput","inputConfig","createMultiSelectInput","fields","toLowerCase","replace","CliForm","activeField","setActiveField","useState","submission","setSubmission","isLoading","setIsLoading","handleSubmit","validating","map","index","input","meta","valid","length","invalid","touched","inactive"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;;;;;;AAEe,SAASA,SAAT,OAAkD;AAAA,MAA/B;AAAEC,IAAAA,MAAF;AAAUC,IAAAA;AAAV,GAA+B;AAAA,MAATC,KAAS;;AAChEC,iBAAMC,SAAN,CAAgB,MAAM;AACrBH,IAAAA,OAAO;AACP,WAAOD,MAAP;AACA,GAHD,EAGG,CAACC,OAAD,EAAUD,MAAV,CAHH;;AAIA,SAAO,6BAAC,qBAAD,EAAkBE,KAAlB,CAAP;AACA;;;;;;;;;ACTD;;AACA;;;;;;;;;;AAEe,SAASG,WAAT,OAMZ;AAAA,MANiC;AACnCC,IAAAA,QADmC;AAEnCN,IAAAA,MAFmC;AAGnCO,IAAAA,QAHmC;AAInCN,IAAAA;AAJmC,GAMjC;AAAA,MADCC,KACD;;AACFC,iBAAMC,SAAN,CAAgB,MAAM;AACrBH,IAAAA,OAAO;AACP,WAAOD,MAAP;AACA,GAHD,EAGG,CAACC,OAAD,EAAUD,MAAV,CAHH;;AAIA,SACC,6BAAC,uBAAD,eACKE,KADL;AAEC,IAAA,QAAQ,EAAE,CAAC;AAAEM,MAAAA;AAAF,KAAD,KAAe;AACxBD,MAAAA,QAAQ,CAACC,KAAD,CAAR;AACAF,MAAAA,QAAQ;AACR;AALF,KADD;AASA;;;;;;;;;ACvBD;;AACA;;;;;;;;;;AAEe,SAASG,gBAAT,OAMZ;AAAA,MANsC;AACxCT,IAAAA,MADwC;AAExCO,IAAAA,QAFwC;AAGxCN,IAAAA,OAHwC;AAIxCO,IAAAA,KAAK,GAAG;AAJgC,GAMtC;AAAA,MADCN,KACD;;AACFC,iBAAMC,SAAN,CAAgB,MAAM;AACrBH,IAAAA,OAAO;AACP,WAAOD,MAAP;AACA,GAHD,EAGG,CAACC,OAAD,EAAUD,MAAV,CAHH;;AAIA,SACC,6BAAC,uBAAD,eACKE,KADL;AAEC,IAAA,QAAQ,EAAE,CAAC;AAAEM,MAAAA,KAAK,EAAEE;AAAT,KAAD,KAAkBH,QAAQ,CAACC,KAAK,CAACG,MAAN,CAAaD,CAAb,CAAD,CAFrC;AAGC,IAAA,UAAU,EAAE,CAAC;AAAEF,MAAAA,KAAK,EAAEE;AAAT,KAAD,KAAkBH,QAAQ,CAACC,KAAK,CAACI,MAAN,CAAaC,IAAI,IAAIA,IAAI,KAAKH,CAA9B,CAAD;AAHvC,KADD;AAOA;;;;;;;;;ACrBD;;AACA;;;;AAEe,SAASI,KAAT,CAAe;AAAEC,EAAAA;AAAF,CAAf,EAA6B;AAC3C,SACC,6BAAC,QAAD,QACC,6BAAC,UAAD;AAAO,IAAA,GAAG;AAAV,KAAYA,QAAZ,CADD,CADD;AAKA;;;;;;;;;ACTD;;AACA;;AACA;;;;AAEe,SAASC,UAAT,CAAoB;AAC/BC,EAAAA,IAD+B;AAE/BC,EAAAA,QAF+B;AAG/BC,EAAAA,OAH+B;AAI/BC,EAAAA;AAJ+B,CAApB,EAKZ;AACC,QAAMC,aAAa,GAAGC,eAAMC,MAAN,CAAa;AAC/BJ,IAAAA,OAD+B;AAE/BK,IAAAA,gBAAgB,EAAE,UAAUC,MAAV,EAAkB;AAChC,aAAOC,YAAGC,SAAH,CAAaF,MAAb,CAAP;AACH;AAJ8B,GAAb,CAAtB;;AAMA,QAAMG,QAAQ,GAAG,6BAAgBP,aAAhB,CAAjB;AACA,QAAMQ,YAAY,GAAG,IAAID,QAAJ,CAAa,aAAb,CAArB;AACA,QAAME,iBAAiB,GAAG,CACtB,MADsB,EAEtB,KAFsB,EAGtB,OAHsB,CAA1B;;AAKA,QAAMC,gBAAgB,GAAIC,KAAD,KAAY;AAAE,qBAAmB,UAASA,KAAM;AAApC,GAAZ,CAAzB;;AACA,QAAMC,qBAAqB,GAAG,CAACR,MAAD,EAASS,UAAT,EAAqBC,OAArB,KAAiC;AAC3D,UAAMC,UAAU,GAAGX,MAAM,CAACY,KAAP,CAAa,CAAb,CAAnB;AACA,UAAM,CAAEC,OAAF,IAAcF,UAAU,CAACC,KAAX,CAAiBH,UAAjB,CAApB;AAEA,QAAI,CAACI,OAAL,EAAcF,UAAU,CAACG,MAAX,CAAkBL,UAAlB,EAA8B,CAA9B,EAAiC;AAAEC,MAAAA,OAAO,EAAEA;AAAX,KAAjC,EAAd,KACKC,UAAU,CAACG,MAAX,CAAkBL,UAAlB,EAA8B,CAA9B,EAAiCM,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBH,OAAlB,EAA2B;AAAEH,MAAAA,OAAO,EAAEA;AAAX,KAA3B,CAAjC;AACL,WAAOC,UAAP;AACH,GAPD;;AAQAhB,EAAAA,MAAM,CAACsB,KAAP,CAAa;AAAErB,IAAAA;AAAF,GAAb,EAA+B,cAA/B;AAEA,SAAO;AACHsB,IAAAA,SAAS,EAAE,IADR;;AAEH,UAAMC,KAAN,GAAc;AACV,aAAO,MAAMf,YAAY,CAACgB,IAAb,CAAkB;AAC3BC,QAAAA,KAAK,EAAE7B,IADoB;AAE3BC,QAAAA;AAF2B,OAAlB,CAAb;AAIH,KAPE;;AAQH6B,IAAAA,oBAAoB,CAACC,IAAD,EAAO;AACvB5B,MAAAA,MAAM,CAACsB,KAAP,CAAa;AAAEM,QAAAA;AAAF,OAAb,EAAsB,sBAAtB;AACA,YAAMC,MAAM,GAAG,IAAf;AACA,YAAMC,QAAQ,GAAG,IAAItB,QAAJ,CAAaoB,IAAb,CAAjB;AACA,YAAMG,oBAAoB,GAAG;AACzBC,QAAAA,GAAG,CAACC,MAAD,EAASC,OAAT,EAAkB;AACjB,gBAAMC,YAAY,GAAGF,MAAM,CAACC,OAAD,CAA3B;AACAlC,UAAAA,MAAM,CAACsB,KAAP,CAAa;AAAEa,YAAAA;AAAF,WAAb,EAA8B,gCAA9B;;AAEA,cAAI,OAAOA,YAAP,KAAwB,UAA5B,EAAwC;AACpC,mBAAOA,YAAP;AACH;;AAED,iBAAO,gBAAgB,GAAGC,IAAnB,EAAyB;AAC5B,kBAAMC,gBAAgB,GAAI3B,iBAAiB,CAAC4B,OAAlB,CAA0BH,YAA1B,IAA0C,CAAC,CAA5C,GAAkD,CAAlD,GAAsD,CAA/E;AACA,kBAAM9B,MAAM,GAAGQ,qBAAqB,CAACuB,IAAD,EAAOC,gBAAP,EAAyB1B,gBAAgB,CAACkB,MAAM,CAACN,SAAR,CAAzC,CAApC;AACAvB,YAAAA,MAAM,CAACsB,KAAP,CAAa;AAAEe,cAAAA,gBAAF;AAAoBhC,cAAAA;AAApB,aAAb,EAA0C,aAA1C;;AAEA,gBAAI;AACA,oBAAMkC,QAAQ,GAAG,MAAMJ,YAAY,CAACK,KAAb,CAAmB,IAAnB,EAAyBnC,MAAzB,CAAvB;AACA,oBAAM;AAAEoC,gBAAAA;AAAF,kBAAaF,QAAnB;AACAvC,cAAAA,MAAM,CAAC0C,IAAP,CAAY;AAAED,gBAAAA;AAAF,eAAZ,EAAwB,6BAAxB;AAEA,qBAAOF,QAAP;AACH,aAND,CAME,OAAOI,KAAP,EAAc;AACZ3C,cAAAA,MAAM,CAAC2C,KAAP,CAAa;AAAEA,gBAAAA;AAAF,eAAb,EAAwB,mBAAxB;;AAEA,kBAAI,CAACA,KAAK,CAACJ,QAAP,IAAmBI,KAAK,CAACJ,QAAN,CAAeE,MAAf,KAA0B,GAAjD,EAAsD;AAClD,sBAAME,KAAN;AACH;;AACD,oBAAM;AAAEF,gBAAAA;AAAF,kBAAaE,KAAK,CAACJ,QAAzB;;AAEA,kBAAI;AACAvC,gBAAAA,MAAM,CAACsB,KAAP,CAAa;AAAEmB,kBAAAA;AAAF,iBAAb,EAAyB,gBAAzB;AACA,sBAAM;AAAEG,kBAAAA,IAAI,EAAE;AAAEhC,oBAAAA;AAAF;AAAR,oBAAsB,MAAMiB,MAAM,CAACL,KAAP,EAAlC;AACAK,gBAAAA,MAAM,CAACN,SAAP,GAAmBX,KAAnB;AACAZ,gBAAAA,MAAM,CAACsB,KAAP,CAAa;AAAEV,kBAAAA;AAAF,iBAAb,EAAwB,OAAxB;AAEAZ,gBAAAA,MAAM,CAACsB,KAAP,CAAa,yBAAb;AACA,sBAAMiB,QAAQ,GAAG,MAAMJ,YAAY,CAACK,KAAb,CAAmB,IAAnB,EAAyB3B,qBAAqB,CAACR,MAAD,EAASgC,gBAAT,EAA2B1B,gBAAgB,CAACkB,MAAM,CAACN,SAAR,CAA3C,CAA9C,CAAvB;AACAvB,gBAAAA,MAAM,CAAC0C,IAAP,CAAY;AAAED,kBAAAA;AAAF,iBAAZ,EAAwB,kCAAxB;AAEA,uBAAOF,QAAP;AAEH,eAZD,CAYE,OAAOI,KAAP,EAAc;AACZ3C,gBAAAA,MAAM,CAAC2C,KAAP,CAAa;AAAEA,kBAAAA;AAAF,iBAAb,EAAwB,aAAxB;AACA,sBAAMA,KAAN;AACH;AACJ;AACJ,WApCD;AAqCH;;AA9CwB,OAA7B;AAgDA,aAAO,IAAIE,KAAJ,CAAUf,QAAV,EAAoBC,oBAApB,CAAP;AACH;;AA7DE,GAAP;AA+DH;;;;;;;;;ACjGD;;;;AAGe,SAASe,qBAAT,CAA+B;AAC1CjD,EAAAA,IAD0C;AAE1CC,EAAAA,QAF0C;AAG1CC,EAAAA,OAH0C;AAI1CC,EAAAA;AAJ0C,CAA/B,EAKV;AACD,QAAM6B,MAAM,GAAG,yBAAW;AACtBhC,IAAAA,IADsB;AAEtBC,IAAAA,QAFsB;AAGtBC,IAAAA,OAHsB;AAItBC,IAAAA;AAJsB,GAAX,CAAf;AAME,QAAM+C,gBAAgB,GAAGlB,MAAM,CAACF,oBAAP,CAA4B,oBAA5B,CAAzB;AAEF,SAAO;AACHqB,IAAAA,sBAAsB,EAAE,MAAO3C,MAAP,IAAkB,MAAM0C,gBAAgB,CAACtB,IAAjB,CAAsBpB,MAAtB;AAD7C,GAAP;AAGH;;;;;;;;;ACpBD;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,MAAM4C,eAAe,GAAG,8BAAsB;AAC1CpD,EAAAA,IAAI,EAAE,MADoC;AAE1CC,EAAAA,QAAQ,EAAE,MAFgC;AAG1CC,EAAAA,OAAO,EAAE,uBAHiC;AAI1CC,EAAAA,MAAM,EAAE;AACVsB,IAAAA,KAAK,EAAE4B,OAAO,CAACC,GADL;AAEVT,IAAAA,IAAI,EAAEQ,OAAO,CAACC,GAFJ;AAGVR,IAAAA,KAAK,EAAEO,OAAO,CAACP;AAHL;AAJkC,CAAtB,CAAxB;;AAWA,MAAMS,eAAe,GAAG,CAACC,IAAD,EAAOC,KAAP,EAAcC,WAAW,GAAG,EAA5B,EAAgCC,MAAM,GAAGpE,KAAK,IAAIA,KAAK,IAAI,EAA3D,EAA+DqE,QAAQ,GAAG,MAAMC,SAAhF,MAA+F;AACtHL,EAAAA,IADsH;AAEtHC,EAAAA,KAFsH;AAGtHC,EAAAA,WAHsH;AAItHC,EAAAA,MAJsH;AAKtHC,EAAAA,QALsH;AAMtHE,EAAAA,KAAK,EAAEhF;AAN+G,CAA/F,CAAxB;;AASA,MAAMiF,iBAAiB,GAAG,CAACP,IAAD,EAAOC,KAAP,EAAcO,WAAd,EAA2BL,MAAM,GAAGpE,KAAK,IAAIA,KAAK,IAAI,EAAtD,EAA0DqE,QAAQ,GAAG,MAAMC,SAA3E,MAA0F;AACnHL,EAAAA,IADmH;AAEnHC,EAAAA,KAFmH;AAGnHO,EAAAA,WAHmH;AAInHL,EAAAA,MAJmH;AAKnHC,EAAAA,QALmH;AAMnHE,EAAAA,KAAK,EAAE1E;AAN4G,CAA1F,CAA1B;;AASA,MAAM6E,sBAAsB,GAAG,CAACT,IAAD,EAAOC,KAAP,EAAcO,WAAd,EAA2BL,MAAM,GAAGpE,KAAK,IAAIA,KAA7C,EAAoDqE,QAAQ,GAAGC,SAA/D,MAA8E;AAC5GL,EAAAA,IAD4G;AAE5GC,EAAAA,KAF4G;AAG5GO,EAAAA,WAH4G;AAI5GL,EAAAA,MAJ4G;AAK5GC,EAAAA,QAL4G;AAM5GE,EAAAA,KAAK,EAAEtE;AANqG,CAA9E,CAA/B;;AASA,MAAM0E,MAAM,GAAG,CACdX,eAAe,CACd,gBADc,EAEd,gBAFc,EAGd,oBAHc,EAIdhE,KAAK,IAAIA,KAAK,GAAGA,KAAK,CAChB4E,WADW,GAEXC,OAFW,CAEH,aAFG,EAEY,EAFZ,EAGXA,OAHW,CAGH,IAHG,EAGG,GAHH,CAAH,GAIR,EARQ,EASd7E,KAAK,IAAI,CAACA,KAAD,GAAS,SAAT,GAAqBsE,SAThB,CADD,EAYdN,eAAe,CACd,cADc,EAEd,cAFc,EAGd,uBAHc,EAIdhE,KAAK,IAAIA,KAAK,GAAGA,KAAK,CAChB4E,WADW,GAEXC,OAFW,CAEH,aAFG,EAEY,EAFZ,EAGXA,OAHW,CAGH,IAHG,EAGG,GAHH,CAAH,GAIR,EARQ,EASd7E,KAAK,IAAI,CAACA,KAAD,GAAS,SAAT,GAAqBsE,SAThB,CAZD,EAuBdN,eAAe,CAAC,uBAAD,EAA0B,eAA1B,CAvBD,EAwBdA,eAAe,CAAC,uBAAD,EAA0B,eAA1B,CAxBD,EAyBdA,eAAe,CAAC,2BAAD,EAA8B,mBAA9B,CAzBD,EA0BdA,eAAe,CAAC,+BAAD,EAAkC,wBAAlC,CA1BD,EA2BdA,eAAe,CAAC,wBAAD,EAA2B,gBAA3B,CA3BD,CAAf,EA8BA;;AACA,MAAMc,OAAO,GAAG,MAAM;AACrB,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCrF,eAAMsF,QAAN,CAAe,CAAf,CAAtC;;AACA,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BxF,eAAMsF,QAAN,EAApC;;AACA,QAAM,CAACG,SAAD,EAAYC,YAAZ,IAA4B1F,eAAMsF,QAAN,CAAe,KAAf,CAAlC;;AAEA,SACC,6BAAC,oBAAD;AAAM,IAAA,QAAQ,EAAE,MAAMhE,MAAN,IAAgB;AAC/BoE,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,YAAMxB,eAAe,CAACD,sBAAhB,CAAuC3C,MAAvC,CAAN;AACAkE,MAAAA,aAAa,CAAClE,MAAD,CAAb;AACAoE,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACA;AALD,KAME,CAAC;AAAEC,IAAAA,YAAF;AAAgBC,IAAAA;AAAhB,GAAD,KACA,6BAAC,QAAD;AAAK,IAAA,aAAa,EAAC;AAAnB,KACEZ,MAAM,CAACa,GAAP,CACA,CACC;AACCvB,IAAAA,IADD;AAECC,IAAAA,KAFD;AAGCC,IAAAA,WAHD;AAICC,IAAAA,MAJD;AAKCC,IAAAA,QALD;AAMCE,IAAAA,KAND;AAOCE,IAAAA;AAPD,GADD,EAUCgB,KAVD,KAYC,6BAAC,qBAAD;AAAO,IAAA,IAAI,EAAExB,IAAb;AAAmB,IAAA,GAAG,EAAEA,IAAxB;AAA8B,IAAA,MAAM,EAAEG,MAAtC;AAA8C,IAAA,QAAQ,EAAEC;AAAxD,KACE,CAAC;AAAEqB,IAAAA,KAAF;AAASC,IAAAA;AAAT,GAAD,KACA,6BAAC,QAAD;AAAK,IAAA,aAAa,EAAC;AAAnB,KACC,6BAAC,QAAD,QACC,6BAAC,SAAD;AAAM,IAAA,IAAI,EAAEZ,WAAW,KAAKU;AAA5B,KAAoCvB,KAApC,OADD,EAEEa,WAAW,KAAKU,KAAhB,GACA,6BAAC,KAAD,eACKC,KADL,EAEKjB,WAFL;AAGC,IAAA,WAAW,EAAEN,WAHd;AAIC,IAAA,QAAQ,EAAE,MAAM;AACf,UAAIwB,IAAI,CAACC,KAAL,IAAc,CAACL,UAAnB,EAA+B;AAC9BP,QAAAA,cAAc,CAAChF,KAAK,IAAIA,KAAK,GAAG,CAAlB,CAAd,CAD8B,CACK;;AACnC,YAAI+E,WAAW,KAAKJ,MAAM,CAACkB,MAAP,GAAgB,CAApC,EAAuC;AACtC;AACAP,UAAAA,YAAY;AACZ;AACD,OAND,MAMO;AACNI,QAAAA,KAAK,CAAClG,MAAN,GADM,CACS;AACf;AACD;AAdF,KADA,GAkBCkG,KAAK,CAAC1F,KAAN,IAAe,6BAAC,SAAD,QAAO0F,KAAK,CAAC1F,KAAb,CAAhB,IACCmE,WAAW,IAAI,6BAAC,UAAD;AAAO,IAAA,IAAI;AAAX,KAAaA,WAAb,CArBlB,EAuBEoB,UAAU,IAAItB,IAAI,KAAK,MAAvB,IACA,6BAAC,QAAD;AAAK,IAAA,UAAU,EAAE;AAAjB,KACC,6BAAC,UAAD;AAAO,IAAA,MAAM;AAAb,KACC,6BAAC,mBAAD;AAAS,IAAA,IAAI,EAAC;AAAd,IADD,CADD,CAxBF,EA8BE0B,IAAI,CAACG,OAAL,IAAgBH,IAAI,CAACI,OAArB,IACA,6BAAC,QAAD;AAAK,IAAA,UAAU,EAAE;AAAjB,KACC,6BAAC,UAAD;AAAO,IAAA,GAAG;AAAV,cADD,CA/BF,EAmCEJ,IAAI,CAACC,KAAL,IAAcD,IAAI,CAACI,OAAnB,IAA8BJ,IAAI,CAACK,QAAnC,IACA,6BAAC,QAAD;AAAK,IAAA,UAAU,EAAE;AAAjB,KACC,6BAAC,UAAD;AAAO,IAAA,KAAK;AAAZ,cADD,CApCF,CADD,EA0CEL,IAAI,CAACpC,KAAL,IAAcoC,IAAI,CAACI,OAAnB,IAA8B,6BAAC,cAAD,QAAQJ,IAAI,CAACpC,KAAb,CA1ChC,CAFF,CAbD,CADF,EAgEC2B,UAAU,GAAIE,SAAS,GAAI,6BAAC,QAAD;AAAK,IAAA,UAAU,EAAE;AAAjB,KAAoB,6BAAC,UAAD;AAAO,IAAA,MAAM;AAAb,KAAc,6BAAC,mBAAD;AAAS,IAAA,IAAI,EAAC;AAAd,IAAd,CAApB,CAAJ,GAA+E,gBAA5F,GAA8G,EAhEzH,CAPF,CADD;AA6EA,CAlFD;;eAmFeN","file":"create.js","sourceRoot":"../../commands","sourcesContent":["import React from 'react'\nimport InkTextInput from 'ink-text-input'\n\nexport default function TextInput({ onBlur, onFocus, ...props }) {\n\tReact.useEffect(() => {\n\t\tonFocus()\n\t\treturn onBlur\n\t}, [onFocus, onBlur])\n\treturn <InkTextInput {...props} />\n}","import React from 'react'\nimport InkSelectInput from 'ink-select-input'\n\nexport default function SelectInput({\n\tonSubmit,\n\tonBlur,\n\tonChange,\n\tonFocus,\n\t...props\n}) {\n\tReact.useEffect(() => {\n\t\tonFocus()\n\t\treturn onBlur\n\t}, [onFocus, onBlur])\n\treturn (\n\t\t<InkSelectInput\n\t\t\t{...props}\n\t\t\tonSelect={({ value }) => {\n\t\t\t\tonChange(value)\n\t\t\t\tonSubmit()\n\t\t\t}}\n\t\t/>\n\t)\n}","import React from 'react'\nimport InkMultiSelect from 'ink-multi-select'\n\nexport default function MultiSelectInput({\n\tonBlur,\n\tonChange,\n\tonFocus,\n\tvalue = [],\n\t...props\n}) {\n\tReact.useEffect(() => {\n\t\tonFocus()\n\t\treturn onBlur\n\t}, [onFocus, onBlur])\n\treturn (\n\t\t<InkMultiSelect\n\t\t\t{...props}\n\t\t\tonSelect={({ value: v }) => onChange(value.concat(v))}\n\t\t\tonUnselect={({ value: v }) => onChange(value.filter(item => item !== v))}\n\t\t/>\n\t)\n}","import React from 'react'\nimport { Box, Color } from 'ink'\n\nexport default function Error({ children }) {\n\treturn (\n\t\t<Box>\n\t\t\t<Color red>{children}</Color>\n\t\t</Box>\n\t)\n}","import axios from 'axios';\nimport { default as EndpointFactory } from 'axios-endpoints';\nimport qs from 'qs';\n\nexport default function makeClient({\n    user,\n    password,\n    baseURL,\n    logger\n}) {\n    const axiosInstance = axios.create({\n        baseURL,\n        paramsSerializer: function (params) {\n            return qs.stringify(params);\n        }\n    });\n    const Endpoint = EndpointFactory(axiosInstance);\n    const authEndpoint = new Endpoint('/auth/login');\n    const TWO_PARAM_METHODS = [\n        'post',\n        'put',\n        'patch'\n    ];\n    const createAuthHeader = (token) => ({ 'Authorization' : `Bearer ${token}`});\n    const decorateEnpointParams = (params, paramIndex, headers) => {\n        const paramsCopy = params.slice(0);\n        const [ options ] = paramsCopy.slice(paramIndex)\n\n        if (!options) paramsCopy.splice(paramIndex, 1, { headers: headers })\n        else paramsCopy.splice(paramIndex, 1, Object.assign({}, options, { headers: headers }))\n        return paramsCopy;\n    }\n    logger.trace({ axiosInstance },'axios client');    \n\n    return {\n        authToken: null,\n        async login() {\n            return await authEndpoint.post({\n                email: user,\n                password\n            })\n        },\n        makeEndpointWithAuth(path) {\n            logger.trace({ path },'makeEndpointWithAuth');    \n            const client = this;\n            const endpoint = new Endpoint(path);\n            const authorizationHandler = {\n                get(target, propKey) {\n                    const origProperty = target[propKey];\n                    logger.trace({ origProperty },'Trap function call in endpoint');    \n\n                    if (typeof origProperty !== 'function') {\n                        return origProperty;\n                    }\n\n                    return async function (...args) {\n                        const optionParamIndex = (TWO_PARAM_METHODS.indexOf(origProperty) > -1 ) ? 1 : 0;\n                        const params = decorateEnpointParams(args, optionParamIndex, createAuthHeader(client.authToken));\n                        logger.trace({ optionParamIndex, params },'Call params');    \n\n                        try {\n                            const response = await origProperty.apply(this, params);\n                            const { status } = response;\n                            logger.info({ status }, 'Http client response status');    \n\n                            return response;\n                        } catch (error) {\n                            logger.error({ error }, 'Http client error');\n\n                            if (!error.response || error.response.status !== 401) {\n                                throw error;\n                            }\n                            const { status } = error.response;\n\n                            try {\n                                logger.trace({ status }, 'Try to sign in');\n                                const { data: { token } } = await client.login();\n                                client.authToken = token;\n                                logger.trace({ token }, 'Token');                                        \n\n                                logger.trace('Run request after login');\n                                const response = await origProperty.apply(this, decorateEnpointParams(params, optionParamIndex, createAuthHeader(client.authToken)));\n                                logger.info({ status }, 'Http client secodresponse status');    \n    \n                                return response;\n\n                            } catch (error) {\n                                logger.error({ error }, 'Login error');                                        \n                                throw error;\n                            }\n                        }\n                    };\n                }\n            };\n            return new Proxy(endpoint, authorizationHandler);\n        }\n    };\n}","import makeClient from './http-client';\n\n\nexport default function createWPManagerClient({\n    user,\n    password,\n    baseURL,\n    logger\n  }) {\n    const client = makeClient({\n        user,\n        password,\n        baseURL,\n        logger\n      })  \n      const projectsEndpoint = client.makeEndpointWithAuth('/wordpress-project');\n\n    return {\n        createWordpressProject: async (params) => await projectsEndpoint.post(params),\n    }\n}","import React from 'react'\nimport { Form, Field } from 'react-final-form'\nimport { Box, Color, Text } from 'ink'\nimport TextInput from '../../components/TextInput'\nimport SelectInput from '../../components/SelectInput'\nimport MultiSelectInput from '../../components/MultiSelectInput'\nimport Error from '../../components/Error'\nimport Spinner from 'ink-spinner'\nimport createWPManagerClient from '../../services/wp-manager-client';\n\nconst wpManagerClient = createWPManagerClient({\n    user: 'test',\n    password: 'test',\n    baseURL: 'http://127.0.0.1:3000',\n    logger: {\n\t\ttrace: console.log,\n\t\tinfo: console.log,\n\t\terror: console.error\n\t}\n  });\n\nconst createTextInput = (name, label, placeholder = '', format = value => value || '', validate = () => undefined) => ({\n\tname,\n\tlabel,\n\tplaceholder,\n\tformat,\n\tvalidate,\n\tInput: TextInput\n})\n\nconst createSelectInput = (name, label, inputConfig, format = value => value || '', validate = () => undefined) => ({\n\tname,\n\tlabel,\n\tinputConfig,\n\tformat,\n\tvalidate,\n\tInput: SelectInput\n})\n\nconst createMultiSelectInput = (name, label, inputConfig, format = value => value, validate = undefined) => ({\n\tname,\n\tlabel,\n\tinputConfig,\n\tformat,\n\tvalidate,\n\tInput: MultiSelectInput\n})\n\nconst fields = [\n\tcreateTextInput(\n\t\t'project.prefix',\n\t\t'Project prefix',\n\t\t'my-awesome-project',\n\t\tvalue => value ? value\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.replace(/[^a-z \\\\-]/g, '')\n\t\t\t\t\t\t\t.replace(/ /g, '-')\n\t\t\t\t\t\t: '',\n\t\tvalue => !value ? 'Require' : undefined\n\t),\n\tcreateTextInput(\n\t\t'project.path',\n\t\t'Project path',\n\t\t'/home/user/localSites',\n\t\tvalue => value ? value\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.replace(/[^a-z \\\\-]/g, '')\n\t\t\t\t\t\t\t.replace(/ /g, '-')\n\t\t\t\t\t\t: '',\n\t\tvalue => !value ? 'Require' : undefined\n\t),\n\tcreateTextInput('project.database.name', 'Database name'),\n\tcreateTextInput('project.database.user', 'Database user'),\n\tcreateTextInput('project.database.password', 'Database password'),\n\tcreateTextInput('project.database.rootPassword', 'Database root password'),\n\tcreateTextInput('project.webserver.port', 'Webserver port'),\n]\n\n/// CliForm\nconst CliForm = () => {\n\tconst [activeField, setActiveField] = React.useState(0)\n\tconst [submission, setSubmission] = React.useState()\n\tconst [isLoading, setIsLoading] = React.useState(false)\n\n\treturn (\n\t\t<Form onSubmit={async params => {\n\t\t\tsetIsLoading(true);\n\t\t\tawait wpManagerClient.createWordpressProject(params);\n\t\t\tsetSubmission(params);\n\t\t\tsetIsLoading(false);\n\t\t}}>\n\t\t\t{({ handleSubmit, validating }) => (\n\t\t\t\t<Box flexDirection=\"column\">\n\t\t\t\t\t{fields.map(\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\t\tplaceholder,\n\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\tvalidate,\n\t\t\t\t\t\t\t\tInput,\n\t\t\t\t\t\t\t\tinputConfig\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t) => (\n\t\t\t\t\t\t\t<Field name={name} key={name} format={format} validate={validate}>\n\t\t\t\t\t\t\t\t{({ input, meta }) => (\n\t\t\t\t\t\t\t\t\t<Box flexDirection=\"column\">\n\t\t\t\t\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t\t\t\t\t<Text bold={activeField === index}>{label}: </Text>\n\t\t\t\t\t\t\t\t\t\t\t{activeField === index ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\t{...input}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{...inputConfig}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonSubmit={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (meta.valid && !validating) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetActiveField(value => value + 1) // go to next field\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (activeField === fields.length - 1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// last field, so submit\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleSubmit()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinput.onBlur() // mark as touched to show error\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t(input.value && <Text>{input.value}</Text>) ||\n\t\t\t\t\t\t\t\t\t\t\t\t(placeholder && <Color gray>{placeholder}</Color>)\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{validating && name === 'name' && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Box marginLeft={1}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Color yellow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Spinner type=\"dots\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Color>\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{meta.invalid && meta.touched && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Box marginLeft={2}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Color red>✖</Color>\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{meta.valid && meta.touched && meta.inactive && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Box marginLeft={2}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Color green>✔</Color>\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t{meta.error && meta.touched && <Error>{meta.error}</Error>}\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t\t{submission ? (isLoading ? \t<Box marginLeft={1}><Color yellow><Spinner type=\"dots\" /></Color></Box>  : 'Sent to server'):''}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</Form>\n\t)\n}\nexport default CliForm;"]}